import{S as s,i as e,s as a,e as o,t,k as r,c as l,a as n,g as c,d as i,o as p,b as u,f as d,K as f,R as g,E as h,T as m,F as b,U as w,G as v,V as y,I as x}from"./vendor-d81b028b.js";import{u as $,j as E,A as U}from"./Env-edee670d.js";function j(s){let e,a,v,y,x,$,E,U,j,I,A,L,N,T,V,k,B,D;return{c(){e=o("form"),a=o("div"),v=o("div"),y=o("label"),x=t("รหัสผู้ใช้"),$=r(),E=o("input"),U=r(),j=o("div"),I=o("label"),A=t("รหัสผ่าน"),L=r(),N=o("input"),T=r(),V=o("button"),k=t("เข้าสู่ระบบ"),this.h()},l(s){e=l(s,"FORM",{});var o=n(e);a=l(o,"DIV",{class:!0});var t=n(a);v=l(t,"DIV",{class:!0});var r=n(v);y=l(r,"LABEL",{for:!0,class:!0});var u=n(y);x=c(u,"รหัสผู้ใช้"),u.forEach(i),$=p(r),E=l(r,"INPUT",{type:!0,id:!0,name:!0,class:!0}),r.forEach(i),U=p(t),j=l(t,"DIV",{class:!0});var d=n(j);I=l(d,"LABEL",{for:!0,class:!0});var f=n(I);A=c(f,"รหัสผ่าน"),f.forEach(i),L=p(d),N=l(d,"INPUT",{type:!0,id:!0,name:!0,class:!0}),d.forEach(i),T=p(t),V=l(t,"BUTTON",{type:!0,class:!0});var g=n(V);k=c(g,"เข้าสู่ระบบ"),g.forEach(i),t.forEach(i),o.forEach(i),this.h()},h(){u(y,"for","full-name"),u(y,"class","leading-7 text-sm text-gray-600"),u(E,"type","text"),u(E,"id","username"),u(E,"name","username"),u(E,"class","w-full bg-white rounded border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),u(v,"class","relative mb-4"),u(I,"for","password"),u(I,"class","leading-7 text-sm text-gray-600"),u(N,"type","password"),u(N,"id","password"),u(N,"name","password"),u(N,"class","w-full bg-white rounded border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),u(j,"class","relative mb-4"),u(V,"type","submit"),u(V,"class","text-white bg-purple-500 border-0 py-2 px-8 focus:outline-none hover:bg-purple-600 rounded text-lg"),u(a,"class","animate  transition-all grid place-items-center shadow-md w-full svelte-cizn6n")},m(o,t){d(o,e,t),f(e,a),f(a,v),f(v,y),f(y,x),f(v,$),f(v,E),g(E,s[0]),f(a,U),f(a,j),f(j,I),f(I,A),f(j,L),f(j,N),g(N,s[1]),f(a,T),f(a,V),f(V,k),B||(D=[h(E,"input",s[3]),h(N,"input",s[4]),h(e,"submit",m(s[2]))],B=!0)},p(s,[e]){1&e&&E.value!==s[0]&&g(E,s[0]),2&e&&N.value!==s[1]&&g(N,s[1])},i:b,o:b,d(s){s&&i(e),B=!1,w(D)}}}function I(s,e,a){let o,t,r,l,n;return v(s,$,(s=>a(6,o=s))),v(s,E,(s=>a(7,t=s))),[r,l,async function(){const s=await fetch(`https://dmsxupload.pea.co.th/tests3/api/password/get?username=${r}&password=${l}`),e=await s.json();console.log(e);const[a,c,i,p,u,...d]=e.split(",");c&&i&&y.post(U+"/auth/local",{identifier:r,password:l,displayName:`${c} ${i}`,profile:`${p},${u},${d},${a}`}).then((s=>{console.log("Well done!"),console.log("User profile",x($,o=s.data.user,o)),console.log("User token",x(E,t=s.data.jwt,t))})).catch((s=>{!async function(){const s=await fetch(`https://dmsxupload.pea.co.th/tests3/api/password/get?username=${r}&password=${l}`),e=await s.json();console.log(e);const[a,t,c,i,p,...u]=e.split(",");t&&c&&(n=n||r+"@pea.co.th",y.post(U+"/auth/local/register",{username:r,email:n,password:l,displayName:`${t} ${c}`,profile:`${i},${p},${u},${a}`}).then((s=>{console.log("Well done!"),console.log("User profile",x($,o=s.data.user,o)),console.log("User token",x($,o=s.data.jwt,o))})).catch((s=>{console.log("An error occurred:",s.response)})))}(),console.log("An error occurred:",s.response)}))},function(){r=this.value,a(0,r)},function(){l=this.value,a(1,l)}]}class A extends s{constructor(s){super(),e(this,s,I,j,a,{})}}export{A as L};
