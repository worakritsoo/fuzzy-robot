import{S as t,i as e,s,k as o,e as n,t as i,U as a,d as l,o as r,c,a as d,g as u,b as v,f,E as p,F as h,G as m,H as g,I as y,J as E,K as I,B as x,V as b}from"../../chunks/vendor-6f853f0b.js";import{A as T,u as w}from"../../chunks/Env-f59ff4d0.js";import{g as j}from"../../chunks/navigation-2ffed81e.js";import"../../chunks/singletons-12a22614.js";function k(t){let e,s,I,x,b,T,w,j,k,A,D,L,S,U,$,B,V,P,N,O,C,H,J,M,z,F,R,_,q,G,K,X,Q,W,Y;return document.title=e=t[1],{c(){s=o(),I=n("div"),x=n("form"),b=n("div"),T=n("label"),w=i("Title"),j=o(),k=n("input"),A=o(),D=n("div"),L=n("label"),S=i("Url"),U=o(),$=n("input"),B=o(),V=n("div"),P=n("label"),N=i("Description"),O=o(),C=n("input"),H=o(),J=n("div"),M=n("label"),z=i("Content"),F=o(),R=n("textarea"),_=o(),q=n("div"),G=n("button"),K=i("Submit"),X=o(),Q=n("div"),this.h()},l(t){a('[data-svelte="svelte-1258swp"]',document.head).forEach(l),s=r(t),I=c(t,"DIV",{class:!0});var e=d(I);x=c(e,"FORM",{class:!0});var o=d(x);b=c(o,"DIV",{class:!0});var n=d(b);T=c(n,"LABEL",{for:!0,class:!0});var i=d(T);w=u(i,"Title"),i.forEach(l),j=r(n),k=c(n,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),n.forEach(l),A=r(o),D=c(o,"DIV",{class:!0});var v=d(D);L=c(v,"LABEL",{for:!0,class:!0});var f=d(L);S=u(f,"Url"),f.forEach(l),U=r(v),$=c(v,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),v.forEach(l),B=r(o),V=c(o,"DIV",{class:!0});var p=d(V);P=c(p,"LABEL",{for:!0,class:!0});var h=d(P);N=u(h,"Description"),h.forEach(l),O=r(p),C=c(p,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),p.forEach(l),H=r(o),J=c(o,"DIV",{class:!0});var m=d(J);M=c(m,"LABEL",{for:!0,class:!0});var g=d(M);z=u(g,"Content"),g.forEach(l),F=r(m),R=c(m,"TEXTAREA",{rows:!0,placeholder:!0,id:!0,class:!0}),d(R).forEach(l),m.forEach(l),_=r(o),q=c(o,"DIV",{class:!0});var y=d(q);G=c(y,"BUTTON",{class:!0,type:!0});var E=d(G);K=u(E,"Submit"),E.forEach(l),y.forEach(l),o.forEach(l),X=r(e),Q=c(e,"DIV",{class:!0}),d(Q).forEach(l),e.forEach(l),this.h()},h(){v(T,"for","title"),v(T,"class","svelte-1gr50x2"),v(k,"type","text"),v(k,"placeholder","Enter title"),v(k,"id","title"),v(k,"class","svelte-1gr50x2"),v(b,"class","my-1"),v(L,"for","url"),v(L,"class","svelte-1gr50x2"),v($,"type","url"),v($,"placeholder","Enter Url"),v($,"id","url"),v($,"class","svelte-1gr50x2"),v(D,"class","my-1"),v(P,"for","description"),v(P,"class","svelte-1gr50x2"),v(C,"type","text"),v(C,"placeholder","Enter description"),v(C,"id","description"),v(C,"class","svelte-1gr50x2"),v(V,"class","my-1"),v(M,"for","title"),v(M,"class","svelte-1gr50x2"),v(R,"rows",5),v(R,"placeholder","Enter content"),v(R,"id","content"),v(R,"class","svelte-1gr50x2"),v(J,"class","my-1"),v(G,"class","submit svelte-1gr50x2"),v(G,"type","submit"),v(q,"class","my-2"),v(x,"class","my-4 mx-auto container p-4"),v(Q,"class","prose md:prose-md w-full"),v(I,"class","md:flex")},m(e,o){f(e,s,o),f(e,I,o),p(I,x),p(x,b),p(b,T),p(T,w),p(b,j),p(b,k),h(k,t[1]),p(x,A),p(x,D),p(D,L),p(L,S),p(D,U),p(D,$),h($,t[3]),p(x,B),p(x,V),p(V,P),p(P,N),p(V,O),p(V,C),h(C,t[2]),p(x,H),p(x,J),p(J,M),p(M,z),p(J,F),p(J,R),h(R,t[0]),p(x,_),p(x,q),p(q,G),p(G,K),p(I,X),p(I,Q),Q.innerHTML=t[4],W||(Y=[m(k,"input",t[7]),m($,"input",t[8]),m(C,"input",t[9]),m(R,"input",t[10]),m(x,"submit",g(t[5]))],W=!0)},p(t,[s]){2&s&&e!==(e=t[1])&&(document.title=e),2&s&&k.value!==t[1]&&h(k,t[1]),8&s&&h($,t[3]),4&s&&C.value!==t[2]&&h(C,t[2]),1&s&&h(R,t[0]),16&s&&(Q.innerHTML=t[4])},i:y,o:y,d(t){t&&l(s),t&&l(I),W=!1,E(Y)}}}var A=function(t,e,s,o){return new(s||(s=Promise))((function(n,i){function a(t){try{r(o.next(t))}catch(e){i(e)}}function l(t){try{r(o.throw(t))}catch(e){i(e)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,l)}r((o=o.apply(t,e||[])).next())}))};const D=({fetch:t,page:{query:e}})=>A(void 0,void 0,void 0,(function*(){const s=e.get("edit");if(s){const e=yield t(T+"/posts/"+s);if(404===e.status){return{status:404,error:new Error(`The post with ID ${s} was not found`)}}{const t=yield e.json();return{props:{editId:s,title:t.title,url:t.url,content:t.content,description:t.description}}}}return{props:{}}}));function L(t,e,s){let o,n;I(t,w,(t=>s(11,n=t)));var i=this&&this.__awaiter||function(t,e,s,o){return new(s||(s=Promise))((function(n,i){function a(t){try{r(o.next(t))}catch(e){i(e)}}function l(t){try{r(o.throw(t))}catch(e){i(e)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,l)}r((o=o.apply(t,e||[])).next())}))};let{editId:a}=e,{title:l=""}=e,{description:r=""}=e,{content:c=""}=e,{url:d=""}=e;return x((()=>{n||j("/login")})),t.$$set=t=>{"editId"in t&&s(6,a=t.editId),"title"in t&&s(1,l=t.title),"description"in t&&s(2,r=t.description),"content"in t&&s(0,c=t.content),"url"in t&&s(3,d=t.url)},t.$$.update=()=>{1&t.$$.dirty&&s(4,o=b(c))},[c,l,r,d,o,function(){var t,e,s,o;return i(this,void 0,void 0,(function*(){if(!localStorage.getItem("token"))return void j("/login");if(a)return void function(){var t,e,s,o;i(this,void 0,void 0,(function*(){if(!localStorage.getItem("token"))return void j("/login");const n=yield fetch(`${T}/posts/`+a,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({title:l,description:r,content:c,url:d})});if(n.ok){const t=yield n.json();j("/blog/"+t.id)}else{const i=yield n.json();(null===(o=null===(s=null===(e=null===(t=null==i?void 0:i.message)||void 0===t?void 0:t[0])||void 0===e?void 0:e.messages)||void 0===s?void 0:s[0])||void 0===o?void 0:o.message)&&alert(i.message[0].messages[0].message)}}))}();const n=yield fetch(`${T}/posts`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({title:l,description:r,content:c,url:d})});if(n.ok){const t=yield n.json();j("/blog/"+t.id)}else{const i=yield n.json();(null===(o=null===(s=null===(e=null===(t=null==i?void 0:i.message)||void 0===t?void 0:t[0])||void 0===e?void 0:e.messages)||void 0===s?void 0:s[0])||void 0===o?void 0:o.message)&&alert(i.message[0].messages[0].message)}}))},a,function(){l=this.value,s(1,l)},function(){d=this.value,s(3,d)},function(){r=this.value,s(2,r)},function(){c=this.value,s(0,c)}]}class S extends t{constructor(t){super(),e(this,t,L,k,s,{editId:6,title:1,description:2,content:0,url:3})}}export{S as default,D as load};
